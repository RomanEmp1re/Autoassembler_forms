# Автоконструктор форм, v1.1.0

## Как пользоваться
### Подготовка файла
Для начала подготавливаем файл с перечислением элементов и их параметров, либо таблицу в БД.
Таблица должна иметь следующие столбцы и значения в них:
**id** - id элемента. Необходимо указывать для корректного порядка элементов.
**structure** - роль элемента в форме.
- header - заголовок группы элементов, указывается над всеми элементами, которые будут принадлежать группе.
- postfix - подпись после элемента.
- Пустое значение - просто элемент.
**type** - вид элемента
- label - надпись
- edit - строка
- memo - ТП
- combo - выпадающий список
**prefix** - подпись к элементу. Будет meddescription для соответствующего элемента. Так же перед элементом будет создана надпись Label с порядковым номером этой надписи. *Отмечается только для элементов*
  
**row** - номер строки внутри группы. Элементы с одинаковым значением **row** будут находиться на одной строке, у них будет увеличиваться **C**

**cnt_str** - количество строк в элементе _memo_. Для других элементов не указывается.

**width**  - ширина элемента. Если не указывается, выставляется в 900.

**default** - значение в элементе по умолчанию

**items** - элементы выпадающего списка, только для элементов _combo_

Пример заполнения приведен в файле TestData.xls

### Загрузка файла
Файл загружаем посредством инструментов импорта в БД в таблицу TestData$. Проверяем простым select запросом, что все ок и запускаем скрипт.
### Ручной режим
Запускаем все до процедуры на создание ЭПМЗ, в результате запроса будет показан XML. Его необходимо сохранить и открыть через редактор ЭПМЗ. Этот вариант подходит, чтобы не создавать запись в базе данных о новой ЭПМЗ и, возможно, просто проверить, что из себя представляет ЭПМЗ
### Автоматический режим
Запускаем все, включая процедуру. В БД будет создан ЭПМЗ и кастомная форма, которой можно пользоваться, однако пока в ней нет печатки
## Что можно делать
1. Одноуровневую иерархию с группами
2. ТП, строки, выпадающие списки и надписи
3. Несколько элементов на одной строке
4. Постфиксы к элементам
## TODO list
1. МС
2. Список диагнозов
3. Учет правил препинания
4. Календарики и время
5. Чекбоксы
6. Глубина иерархии - 2
7. Адаптация под максимальную ширину (если элемент слишком широкий - сократить до 900. Если группа элементов не влезает в эту ширину, последний перенести на следующую строку)
8. Создание SQL запроса для печатки
9. Добавление печатки
